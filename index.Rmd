---
title: "AHP Implementada em R"
subtitle: "LatiR-2019"
author: "Luciane Alcoforado, Orlando Longo,<br> Lyncoln Sousa, Steven Ross, <br> Alessandra Simão"
institute: "Universidade Federal Fluminense"
output:
  xaringan::moon_reader:
    lib_dir: libs
    nature:
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
---

<style type="text/css">
body, td {
   font-size: 14px;
}
code.r{
  font-size: 20px;
}
pre {
  font-size: 20px
}
.remark-slide-content {
  font-size: 28px;
  padding: 20px 80px 20px 80px;
}
.remark-code, .remark-inline-code {
  background: #000000;
}
.remark-code {
  font-size: 16px;
}

</style>

```{r setup, include=FALSE}
options(htmltools.dir.version = FALSE)
```



Estudo sobre o método AHP e criação de um pacote.

Projeto PIBIC 2018/19 - Universidade Federal Fluminense

Grupo de Pesquisa: Estatística com R

Início: agosto de 2018

Plataforma Github

Linguagem: R


---
class: center, middle

# Tomar una decisión, establecer una meta

### Comprar un automóvil
### Elige un programa
### Elige un lugar de vacaciones

---
class: inverse, middle

#  ¿Cuales son las alternativas?

### Comprar un automóvil: Modelo A, B o C

### Elige un programa: R, Python, C++ o Java

### Elige un lugar de vacaciones: Rio de Janeiro, Santiago de Chile o Buenos Aires


---
class: center, middle

# Estoy 100% seguro de que estoy 0% seguro de lo que voy a hacer

![](figuras//decisao.gif)

---
class: inverse, center, middle

#  ¿Cuales son los criterios?

###comodidad, precio, prestigio, mantenimiento

---
class: inverse, center, middle

#  ¿Cuál es el método para tomar una decisión?

###Puedes elegir AHP
---


class: center, middle

# buena elección!

![](figuras//dic.gif)

---

# Método Utilizado para tomar una decisión

**AHP** (Analytic Hierarchy Process) fue creado por Saaty en 1970


--

se divide en tres pasos:

- construcción de niveles jerárquicos;

- Establecimiento de prioridades mediante juicios iguales de los criterios 
establecido ;

- evaluación de la coherencia lógica de los juicios de paridad.



--
---
#Prioridades

-Calcule los pesos de cada nivel y los pesos de las alternativas

-Ranquear as alternativas

---
#Matriz de Paridad o Matriz de Juicio

-juicios al comparar criterios

--
<style type="text/css">
.tg  {border-collapse:collapse;border-spacing:0;}
.tg td{font-family:Arial, sans-serif;font-size:16px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:black;}
.tg th{font-family:Arial, sans-serif;font-size:16px;font-weight:normal;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:black;}
.tg .tg-txmo{font-size:20px;font-family:"Lucida Console", Monaco, monospace !important;;color:#000000;border-color:inherit;text-align:center;vertical-align:top}
</style>
<table class="tg">
  <tr>
    <th class="tg-txmo">Critérios</th>
    <th class="tg-txmo">Critério1</th>
    <th class="tg-txmo">Critério2   </th>
    <th class="tg-txmo">Critério3</th>
  </tr>
  <tr>
    <td class="tg-txmo">Critério1</td>
    <td class="tg-txmo">1</td>
    <td class="tg-txmo">4</td>
    <td class="tg-txmo">3</td>
  </tr>
  <tr>
    <td class="tg-txmo">Critério2</td>
    <td class="tg-txmo">1/4</td>
    <td class="tg-txmo">1</td>
    <td class="tg-txmo">5</td>
  </tr>
  <tr>
    <td class="tg-txmo">Critério3</td>
    <td class="tg-txmo">1/3</td>
    <td class="tg-txmo">1/5</td>
    <td class="tg-txmo">1</td>
  </tr>
</table>

--

###Critério1    4 vezes mas importante que critério2

###Recíproco: critério2    1/4 da importancia de critério1

##juicios coherentes

---
#Probar la consistencia de los juicios

IC = <a href="https://www.codecogs.com/eqnedit.php?latex=\dpi{120}&space;\LARGE&space;\frac{\lambda_{max}&space;-n}{n-1}" target="_blank"><img src="https://latex.codecogs.com/gif.latex?\dpi{120}&space;\LARGE&space;\frac{\lambda_{max}&space;-n}{n-1}" title="\LARGE \frac{\lambda_{max} -n}{n-1}" /></a>

##Grado de consistencia para cada matriz

CR = IC/IA < 0.1 ou 10%
---
#Instalación de paquete

```{r}
#install.packages("devtools")
#devtools::install_github("Lyncoln/AHP2")

library(AHP)
```


---

#Bases de datos ejemplos : BD1, BD2, BD3, BD4
###Jerarquía BD1: comprar un auto
###Tres Alternativas: A, B e C (modelos de autos)


![](figuras//carros.png)
---
<div class="box">
    <img src="figuras//pen.gif"/>
    <span> A </span>
</div>
<div class="box">
    <img src="figuras//dic2.gif"/>
    <span> B </span>
</div>
<div class="box">
    <img src="figuras//ani.gif"/>
    <span> C </span>
</div>

<style>
div.box {
	width: 550px;
	display: inline-block;
}
</style>

---
#Cálculo del grado de consistencia: CR()

```{r}
lapply(BD1, function(x) CR(x))

```


---

#Cálculo de peso matricial: calcula_prioridades()

```{r}
calcula_prioridades(BD1)
```


---
#Aplique ahp a una lista de matriz con formato adecuado o archivo de Excel: ahp_geral()

```{r}
tabela = ahp_geral(BD1) # No tiene subcriterios

```
**ahp_geral(base, mapeamento = "PADRÃO", nomes_alternativas = "PADRÃO")**


---
#Clasifique las alternativas de una tabla ahp: ranque()

```{r}
ranque(tabela)
```

<div class="box">
    <img src="figuras//pen.gif"/>
    <span> A </span>
</div>

<style>
div.box {
	width: 250px;
	display: inline-block;
}
</style>
---
#Formatea la tabla de resultados para la exportación: formata_tabela()

```{r}
formata_tabela(tabela)
```



---

```{r}
formata_tabela(tabela, cores = "BRANCO")
```

---

```{r}
formata_tabela(tabela, cores = "CINZA")
```


---
#Crea matrices emparejadas y pruebe su consistencia: matrizJulgamento()

![](figuras//julgamento.png)
**matriz_julgamento(qtd_comparacoes, CR = TRUE, qtd_matrizes = 1)**
---

#Lectura de datos: ler()

```{r}
base<- 
  ler("tabelaLR.xlsx")
length(base)
base[1:2]
```
---

#Jerarquía

![](figuras//rplot.png)

---
#Organización de datos


![](figuras//excel.png)

---

```{r}

tabela2 = ahp_geral(base, mapeamento = c(0,3),
                   c("R","Python","C++","Java")); tabela
```


---
#Tabela formatada:
```{r}
formata_tabela(tabela2, cores = "CINZA")
```
---

#Ranque: 

```{r}
ranque(tabela2)
```


---

#Planes para el futuro:
--


- Mejorar el rendimiento computacional de las funciones;
- Desarrollar tutorial para las funciones;
- Desarrollar la función de imagen jerárquica;
- Interatividad con shiny.


--



---
class: center, middle

Gracias!!!

e-mail: lucianea@id.uff.br

twitter: @alcoforadouff

---
