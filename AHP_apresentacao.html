<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
  <head>
    <title>AHP Implementada em R</title>
    <meta charset="utf-8" />
    <meta name="author" content="Luciane Alcoforado, Orlando Longo,  Lyncoln Sousa, Steven Ross,   Alessandra Simão" />
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <link href="libs/remark-css/default-fonts.css" rel="stylesheet" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# AHP Implementada em R
## LatiR-2019
### Luciane Alcoforado, Orlando Longo,<br> Lyncoln Sousa, Steven Ross, <br> Alessandra Simão
### Universidade Federal Fluminense

---







---
class: center, middle

# Tomar una decisión, establecer una meta

### Comprar un automóvil

---
class: inverse, center, middle

#  ¿Cuales son las alternativas?

---

# Método Utilizado para tomar una decisión

**AHP** (Analytic Hierarchy Process) fue creado por Saaty en 1970


--

se divide en tres pasos:

- construcción de niveles jerárquicos;
- Establecimiento de prioridades mediante juicios iguales de los criterios 
establecido ;
- evaluación de la coherencia lógica de los juicios de paridad.



--


---
background-image: url("hierarquia.png")



---
#Instalação do pacote


```r
#install.packages("devtools")
#devtools::install_github("Lyncoln/AHP2")

library(AHP)
```


---

#Funcões do pacote






---

# Leitura dos dados: ler()


```r
base&lt;- 
  ler("TabelaR.xlsx")

base
```

```
## $`Melhor linguagem`
## # A tibble: 3 x 3
##    ...1  ...2  ...3
##   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1   1    1.25     5
## 2   0.8  1        4
## 3   0.2  0.25     1
## 
## $Desempenho
## # A tibble: 3 x 3
##    ...1  ...2  ...3
##   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 1         3     3
## 2 0.333     1     1
## 3 0.333     1     1
## 
## $Análise
## # A tibble: 3 x 3
##    ...1  ...2  ...3
##   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 1         3 0.5  
## 2 0.333     1 0.167
## 3 2         6 1    
## 
## $Suporte
## # A tibble: 3 x 3
##    ...1  ...2  ...3
##   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 1       0.6   1.5
## 2 1.67    1     2.5
## 3 0.667   0.4   1  
## 
## $Performance
## # A tibble: 3 x 3
##    ...1  ...2  ...3
##   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 1       1.2   2.5
## 2 0.833   1     2  
## 3 0.4     0.5   1  
## 
## $Multiplataforma
## # A tibble: 3 x 3
##    ...1  ...2  ...3
##   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1   1     1       2
## 2   1     1       2
## 3   0.5   0.5     1
## 
## $Intuitividade
## # A tibble: 3 x 3
##    ...1  ...2  ...3
##   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 1     1.5    2.25
## 2 0.667 1      1.5 
## 3 0.444 0.667  1   
## 
## $Gráficos
## # A tibble: 3 x 3
##    ...1  ...2  ...3
##   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1   1   2         5
## 2   0.5 1         3
## 3   0.2 0.333     1
## 
## $Sintaxe
## # A tibble: 3 x 3
##    ...1  ...2  ...3
##   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 1     1.5     3  
## 2 0.667 1       1.5
## 3 0.333 0.667   1  
## 
## $Biblioteca
## # A tibble: 3 x 3
##    ...1  ...2  ...3
##   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 1       0.5   1.5
## 2 2       1     2  
## 3 0.667   0.5   1  
## 
## $Comunidade
## # A tibble: 3 x 3
##    ...1  ...2  ...3
##   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 1       3     5.2
## 2 0.333   1     2  
## 3 0.192   0.5   1  
## 
## $Material
## # A tibble: 3 x 3
##    ...1  ...2  ...3
##   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 1     2      2.45
## 2 0.5   1      1.3 
## 3 0.408 0.769  1   
## 
## $Popularidade
## # A tibble: 3 x 3
##    ...1  ...2  ...3
##   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 1     2       3  
## 2 0.5   1       1.4
## 3 0.333 0.714   1
```


---

#Cria matrizes pareadas e testa sua consistência: matrizJulgamento()


```r
#matriz_julgamento(3)
## Tem que interagir pelo console
```


---
#Cálculo do grau de consistência: CR()


```r
CR(base[[1]])
```

```
## [1] 8.540177e-16
```


---

#Cálculo de pesos das matrizes: calcula_prioridades()


```r
calcula_prioridades(base)
```

```
## $`Melhor linguagem`
## [1] 0.5 0.4 0.1
## 
## $Desempenho
## [1] 0.6 0.2 0.2
## 
## $Análise
## [1] 0.3 0.1 0.6
## 
## $Suporte
## [1] 0.3 0.5 0.2
## 
## $Performance
## [1] 0.4489235 0.3690469 0.1820296
## 
## $Multiplataforma
## [1] 0.4 0.4 0.2
## 
## $Intuitividade
## [1] 0.4736842 0.3157895 0.2105263
## 
## $Gráficos
## [1] 0.5815521 0.3089956 0.1094523
## 
## $Sintaxe
## [1] 0.5069483 0.3070621 0.1859896
## 
## $Biblioteca
## [1] 0.2848756 0.4977236 0.2174008
## 
## $Comunidade
## [1] 0.6523291 0.2280665 0.1196045
## 
## $Material
## [1] 0.5235162 0.2669946 0.2094892
## 
## $Popularidade
## [1] 0.5465316 0.2670530 0.1864154
```


---
#Aplica a ahp para uma lista de matrizes ou um arquivo excel devidamente formatado: ahp_geral()


```r
tabela = ahp_geral(base, mapeamento = c(0,3,2),c("R","Python","C#")); tabela
```

```
## # A tibble: 9 x 6
##   Criterios            Pesos      R  Python    `C#`       CR
##   &lt;chr&gt;                &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;
## 1 ---Melhor linguagem 1      0.532  0.271   0.197   8.54e-16
## 2 --Desempenho        0.5    0.3    0.1     0.1     0.      
## 3 --Análise           0.400  0.184  0.136   0.0804  0.      
## 4 -Performance        0.120  0.0539 0.0443  0.0218  1.78e- 4
## 5 -Multiplataforma    0.0400 0.016  0.0160  0.008   0.      
## 6 -Intuitividade      0.24   0.114  0.0758  0.0505  1.71e-15
## 7 --Suporte           0.100  0.0428 0.0246  0.0126  0.      
## 8 -Gráficos           0.03   0.0174 0.00927 0.00328 3.55e- 3
## 9 -Sintaxe            0.0500 0.0253 0.0154  0.00930 8.85e- 3
```



---
#Ranqueia as alternativas de uma tabela ahp: ranque()


```r
ranque(tabela)
```

```
## # A tibble: 3 x 3
##   Ranque Alternativas Pesos
##    &lt;int&gt; &lt;chr&gt;        &lt;dbl&gt;
## 1      1 R            0.532
## 2      2 Python       0.271
## 3      3 C#           0.197
```


---
#Formata a tabela do resultado para exportação: formata_tabela()


```r
formata_tabela(tabela)
```


&lt;table class="table table-condensed"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; Criterios &lt;/th&gt;
   &lt;th style="text-align:center;"&gt; Pesos &lt;/th&gt;
   &lt;th style="text-align:center;"&gt; R &lt;/th&gt;
   &lt;th style="text-align:center;"&gt; Python &lt;/th&gt;
   &lt;th style="text-align:center;"&gt; C# &lt;/th&gt;
   &lt;th style="text-align:center;"&gt; CR &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="color: grey; font-weight: bold"&gt;---Melhor linguagem&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span&gt;100%  &lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="font-weight: bold; font-size: 130%"&gt;53.2% &lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span&gt;27.07%&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span&gt;19.73%&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #B0FFD5; border-radius: 4px; color: black; display: block"&gt;0%   &lt;/span&gt; &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="color: grey; font-weight: bold"&gt;--Desempenho       &lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #71ca97; border-radius: 4px; color: black; display: block"&gt;50%&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #0060d3; border-radius: 4px; color: black; display: block"&gt;30%   &lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #7aaef0; border-radius: 4px; color: black; display: block"&gt;10%   &lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #7aaef0; border-radius: 4px; color: black; display: block"&gt;10%   &lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #B0FFD5; border-radius: 4px; color: black; display: block"&gt;0%   &lt;/span&gt; &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="color: grey; font-weight: bold"&gt;--Análise          &lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #88d3a8; border-radius: 4px; color: black; display: block"&gt;40%&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #478de4; border-radius: 4px; color: black; display: block"&gt;18.36%&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #64a0eb; border-radius: 4px; color: black; display: block"&gt;13.61%&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #86b5f3; border-radius: 4px; color: black; display: block"&gt;8.04% &lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #B0FFD5; border-radius: 4px; color: black; display: block"&gt;0%   &lt;/span&gt; &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="color: grey; font-weight: bold"&gt;-Performance       &lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #c9eed9; border-radius: 4px; color: black; display: block"&gt;12%&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #96c0f7; border-radius: 4px; color: black; display: block"&gt;5.39% &lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #9cc3f8; border-radius: 4px; color: black; display: block"&gt;4.43% &lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #aaccfc; border-radius: 4px; color: black; display: block"&gt;2.18% &lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #B0FFD5; border-radius: 4px; color: black; display: block"&gt;0.02%&lt;/span&gt; &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="color: grey; font-weight: bold"&gt;-Multiplataforma   &lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #dbf6e7; border-radius: 4px; color: black; display: block"&gt;4% &lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #aecffd; border-radius: 4px; color: black; display: block"&gt;1.6%  &lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #aecffd; border-radius: 4px; color: black; display: block"&gt;1.6%  &lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #b3d2fe; border-radius: 4px; color: black; display: block"&gt;0.8%  &lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #B0FFD5; border-radius: 4px; color: black; display: block"&gt;0%   &lt;/span&gt; &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="color: grey; font-weight: bold"&gt;-Intuitividade     &lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #ade2c4; border-radius: 4px; color: black; display: block"&gt;24%&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #72a8ee; border-radius: 4px; color: black; display: block"&gt;11.37%&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #89b7f4; border-radius: 4px; color: black; display: block"&gt;7.58% &lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #99c1f8; border-radius: 4px; color: black; display: block"&gt;5.05% &lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #B0FFD5; border-radius: 4px; color: black; display: block"&gt;0%   &lt;/span&gt; &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="color: grey; font-weight: bold"&gt;--Suporte          &lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #cdf0dc; border-radius: 4px; color: black; display: block"&gt;10%&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #9dc4f9; border-radius: 4px; color: black; display: block"&gt;4.28% &lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #a8cbfb; border-radius: 4px; color: black; display: block"&gt;2.46% &lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #b0d0fd; border-radius: 4px; color: black; display: block"&gt;1.26% &lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #B0FFD5; border-radius: 4px; color: black; display: block"&gt;0%   &lt;/span&gt; &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="color: grey; font-weight: bold"&gt;-Gráficos          &lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #def7e9; border-radius: 4px; color: black; display: block"&gt;3% &lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #adcefc; border-radius: 4px; color: black; display: block"&gt;1.74% &lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #b2d1fe; border-radius: 4px; color: black; display: block"&gt;0.93% &lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #b6d4ff; border-radius: 4px; color: black; display: block"&gt;0.33% &lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #B0FFD5; border-radius: 4px; color: black; display: block"&gt;0.36%&lt;/span&gt; &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="color: grey; font-weight: bold"&gt;-Sintaxe           &lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #d9f5e5; border-radius: 4px; color: black; display: block"&gt;5% &lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #a8cbfb; border-radius: 4px; color: black; display: block"&gt;2.53% &lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #aecffd; border-radius: 4px; color: black; display: block"&gt;1.54% &lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #b2d1fe; border-radius: 4px; color: black; display: block"&gt;0.93% &lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #B0FFD5; border-radius: 4px; color: black; display: block"&gt;0.88%&lt;/span&gt; &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;



---

#Planos para o futuro:
--


- Melhorar desempenho computacional das funções;
- Desenvolver tutorial para as funções;
- Desenvolver função que gera imagem da hierarquia;
- Interatividade com o shiny.



--



---
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
