<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
  <head>
    <title>AHP Implementada em R</title>
    <meta charset="utf-8" />
    <meta name="author" content="Luciane Alcoforado, Orlando Longo,  Lyncoln Sousa, Steven Ross,   Alessandra Simão" />
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <link href="libs/remark-css/default-fonts.css" rel="stylesheet" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# AHP Implementada em R
## LatiR-2019
### Luciane Alcoforado, Orlando Longo,<br> Lyncoln Sousa, Steven Ross, <br> Alessandra Simão
### Universidade Federal Fluminense

---







---
class: center, middle

# Tomar una decisión, establecer una meta

### Comprar un automóvil

---
class: inverse, center, middle

#  ¿Cuales son las alternativas?

---

# Método Utilizado para tomar una decisión

**AHP** (Analytic Hierarchy Process) fue creado por Saaty en 1970


--

se divide en tres pasos:

- construcción de niveles jerárquicos;
- Establecimiento de prioridades mediante juicios iguales de los criterios 
establecido ;
- evaluación de la coherencia lógica de los juicios de paridad.



--


---
background-image: url("https://www.researchgate.net/profile/Marcos_Dos_Santos6/publication/320413012/figure/fig1/AS:549943293079552@1508128106968/Figura-1-Estrutura-hierarquica-do-Metodo-AHP.png")
background-position: 50% 50%
class: center, bottom, inverse

# Hierarquia

---
#Instalação do pacote


```r
#install.packages("devtools")
#devtools::install_github("Lyncoln/AHP2")

library(AHP)
```


---

#Funcões do pacote






---

# Leitura dos dados: ler()


```r
base&lt;- 
  ler("BD5.xlsx")

class(base)
```

```
## [1] "list"
```


---

#Cria matrizes pareadas e testa sua consistência: matrizJulgamento()


```r
#matriz_julgamento(3)
## Tem que interagir pelo console
```


---
#Cálculo do grau de consistência: CR()


```r
CR(base[[1]])
```

```
## [1] 0.08246797
```


---

#Cálculo de pesos das matrizes: calcula_prioridades()


```r
calcula_prioridades(base)
```

```
## $`Lugar para morar`
## [1] 0.1006539 0.2255355 0.6738106
## 
## $Preço
## [1] 0.53682456 0.36429151 0.09888393
## 
## $Transporte
## [1] 0.1570558 0.5936337 0.2493105
## 
## $Segurança
## [1] 0.8571429 0.1428571
## 
## $Ônibus
## [1] 0.06032764 0.70852417 0.23114819
## 
## $Pavimento
## [1] 0.2582850 0.6369856 0.1047294
## 
## $Pedágio
## [1] 0.75824570 0.15124689 0.09050742
## 
## $Guardas
## [1] 0.5278361 0.3325159 0.1396479
## 
## $Delegacias
## [1] 0.1570558 0.5936337 0.2493105
```


---
#Aplica a ahp para uma lista de matrizes ou um arquivo excel devidamente formatado: ahp_geral()


```r
tabela = ahp_geral(base, mapeamento = c(0,3,2)); tabela
```

```
## # A tibble: 9 x 6
##   Criterios            Pesos       A       B       C     CR
##   &lt;chr&gt;                &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;
## 1 ---Lugar para morar 1.000  0.453   0.405   0.142   0.0825
## 2 --Preço             0.101  0.0540  0.0367  0.00995 0.0904
## 3 --Transporte        0.226  0.0794  0.119   0.0273  0.0516
## 4 -Ônibus             0.0354 0.00214 0.0251  0.00819 0.0685
## 5 -Pavimento          0.134  0.0346  0.0853  0.0140  0.0370
## 6 -Pedágio            0.0562 0.0426  0.00850 0.00509 0.0311
## 7 --Segurança         0.674  0.320   0.249   0.105   0     
## 8 -Guardas            0.578  0.305   0.192   0.0807  0.0516
## 9 -Delegacias         0.0963 0.0151  0.0571  0.0240  0.0516
```



---
#Ranqueia as alternativas de uma tabela ahp: ranque()


```r
ranque(tabela)
```

```
## # A tibble: 3 x 3
##   Ranque Alternativas Pesos
##    &lt;int&gt; &lt;chr&gt;        &lt;dbl&gt;
## 1      1 A            0.453
## 2      2 B            0.405
## 3      3 C            0.142
```


---
#Formata a tabela do resultado para exportação: formata_tabela()


```r
formata_tabela(tabela)
```


&lt;table class="table table-condensed"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; Criterios &lt;/th&gt;
   &lt;th style="text-align:center;"&gt; Pesos &lt;/th&gt;
   &lt;th style="text-align:center;"&gt; A &lt;/th&gt;
   &lt;th style="text-align:center;"&gt; B &lt;/th&gt;
   &lt;th style="text-align:center;"&gt; C &lt;/th&gt;
   &lt;th style="text-align:center;"&gt; CR &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="color: grey; font-weight: bold"&gt;---Lugar para morar&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span&gt;100%  &lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="font-weight: bold; font-size: 130%"&gt;45.34%&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span&gt;40.47%&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span&gt;14.19%&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #B0FFD5; border-radius: 4px; color: black; display: block"&gt;8.25%&lt;/span&gt; &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="color: grey; font-weight: bold"&gt;--Preço            &lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #d2f2e0; border-radius: 4px; color: black; display: block"&gt;10.07%&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #98c1f7; border-radius: 4px; color: black; display: block"&gt;5.4%  &lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #a2c7fa; border-radius: 4px; color: black; display: block"&gt;3.67% &lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #b1d1fd; border-radius: 4px; color: black; display: block"&gt;1%    &lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #B0FFD5; border-radius: 4px; color: black; display: block"&gt;9.04%&lt;/span&gt; &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="color: grey; font-weight: bold"&gt;--Transporte       &lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #bde9d0; border-radius: 4px; color: black; display: block"&gt;22.55%&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #89b7f4; border-radius: 4px; color: black; display: block"&gt;7.94% &lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #73a9ee; border-radius: 4px; color: black; display: block"&gt;11.89%&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #a7cafb; border-radius: 4px; color: black; display: block"&gt;2.73% &lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #B0FFD5; border-radius: 4px; color: black; display: block"&gt;5.16%&lt;/span&gt; &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="color: grey; font-weight: bold"&gt;-Ônibus            &lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #def7e9; border-radius: 4px; color: black; display: block"&gt;3.54% &lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #b6d4ff; border-radius: 4px; color: black; display: block"&gt;0.21% &lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #a8cbfb; border-radius: 4px; color: black; display: block"&gt;2.51% &lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #b2d1fe; border-radius: 4px; color: black; display: block"&gt;0.82% &lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #B0FFD5; border-radius: 4px; color: black; display: block"&gt;6.85%&lt;/span&gt; &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="color: grey; font-weight: bold"&gt;-Pavimento         &lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #cdf0dc; border-radius: 4px; color: black; display: block"&gt;13.39%&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #a3c8fa; border-radius: 4px; color: black; display: block"&gt;3.46% &lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #86b5f3; border-radius: 4px; color: black; display: block"&gt;8.53% &lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #afcffd; border-radius: 4px; color: black; display: block"&gt;1.4%  &lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #B0FFD5; border-radius: 4px; color: black; display: block"&gt;3.7% &lt;/span&gt; &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="color: grey; font-weight: bold"&gt;-Pedágio           &lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #daf5e6; border-radius: 4px; color: black; display: block"&gt;5.62% &lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #9ec5f9; border-radius: 4px; color: black; display: block"&gt;4.26% &lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #b2d1fe; border-radius: 4px; color: black; display: block"&gt;0.85% &lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #b4d2fe; border-radius: 4px; color: black; display: block"&gt;0.51% &lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #B0FFD5; border-radius: 4px; color: black; display: block"&gt;3.11%&lt;/span&gt; &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="color: grey; font-weight: bold"&gt;--Segurança        &lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #71ca97; border-radius: 4px; color: black; display: block"&gt;67.38%&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #0060d3; border-radius: 4px; color: black; display: block"&gt;32%   &lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #2879dc; border-radius: 4px; color: black; display: block"&gt;24.92%&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #7baef0; border-radius: 4px; color: black; display: block"&gt;10.47%&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #B0FFD5; border-radius: 4px; color: black; display: block"&gt;0%   &lt;/span&gt; &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="color: grey; font-weight: bold"&gt;-Guardas           &lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #81d0a3; border-radius: 4px; color: black; display: block"&gt;57.76%&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #0865d5; border-radius: 4px; color: black; display: block"&gt;30.49%&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #498ee4; border-radius: 4px; color: black; display: block"&gt;19.2% &lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #89b7f4; border-radius: 4px; color: black; display: block"&gt;8.07% &lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #B0FFD5; border-radius: 4px; color: black; display: block"&gt;5.16%&lt;/span&gt; &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="color: grey; font-weight: bold"&gt;-Delegacias        &lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #d3f2e1; border-radius: 4px; color: black; display: block"&gt;9.63% &lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #aecffd; border-radius: 4px; color: black; display: block"&gt;1.51% &lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #96bff7; border-radius: 4px; color: black; display: block"&gt;5.71% &lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #a9ccfb; border-radius: 4px; color: black; display: block"&gt;2.4%  &lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; &lt;span style="background-color: #B0FFD5; border-radius: 4px; color: black; display: block"&gt;5.16%&lt;/span&gt; &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;



---
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();</script>

<script>
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
